{"version":3,"file":"wallet-app-root.entry.esm.js","sources":["src/components/wallet-app-root/wallet-app-root.css?tag=wallet-app-root&encapsulation=shadow","src/components/wallet-app-root/wallet-app-root.tsx"],"sourcesContent":[":host {\r\n  display: block;\r\n  min-height: 100vh;\r\n  background: #f7f9fb;\r\n  font-family: 'Inter', 'Segoe UI', Arial, sans-serif;\r\n  box-sizing: border-box;\r\n  width: 100%;\r\n  max-width: 100vw;\r\n  overflow-x: hidden;\r\n}\r\n\r\nhtml, body {\r\n  overflow-x: hidden !important;\r\n  overflow-y: auto !important;\r\n  width: 100%;\r\n  max-width: 100vw;\r\n  height: 100vh;\r\n  margin: 0;\r\n  padding: 0;\r\n  position: fixed;\r\n  box-sizing: border-box;\r\n}\r\n\r\nheader {\r\n  position: relative;\r\n  left: 0;\r\n  right: 0;\r\n  width: 100vw;\r\n  max-width: 100vw;\r\n  min-width: 0;\r\n  overflow-x: hidden;\r\n  background: #2563eb;\r\n  color: #fff;\r\n  padding: 1.5rem 0;\r\n  text-align: center;\r\n  margin-bottom: 2rem;\r\n  box-shadow: 0 2px 8px rgba(0,0,0,0.04);\r\n  z-index: 100;\r\n}\r\n\r\nheader h1 {\r\n  font-size: 2.1rem;\r\n  font-weight: 700;\r\n  letter-spacing: 0.01em;\r\n  margin: 0;\r\n  width: 100%;\r\n  box-sizing: border-box;\r\n  overflow-wrap: break-word;\r\n  white-space: normal;\r\n}\r\n\r\nmain {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  min-height: 80%;\r\n  width: 100vw;\r\n  box-sizing: border-box;\r\n  margin: 0;\r\n  padding: 0 1rem;\r\n}\r\n\r\n@media (max-width: 900px) {\r\n  header h1 {\r\n    font-size: 1.5rem;\r\n  }\r\n  main {\r\n    padding: 0 0.5rem;\r\n  }\r\n}\r\n@media (max-width: 600px) {\r\n  header {\r\n    padding: 1rem 0.2rem;\r\n    font-size: 1.3rem;\r\n  }\r\n  header h1 {\r\n    font-size: 1.1rem;\r\n  }\r\n  main {\r\n    padding: 0 0.2rem;\r\n  }\r\n}\r\n\r\n:host, .theme-light {\r\n  --bg: #f7f9fb;\r\n  --text: #111827;\r\n  --header-bg: #2563eb;\r\n  --header-text: #fff;\r\n  --card-bg: #fff;\r\n  --card-shadow: 0 2px 16px rgba(37,99,235,0.08);\r\n  --input-bg: #fff;\r\n  --input-border: #cbd5e1;\r\n  --input-focus: #2563eb;\r\n  --primary: #2563eb;\r\n  --primary-hover: #1d4ed8;\r\n  --danger: #e11d48;\r\n  --card-radius: 18px;\r\n}\r\n.theme-dark {\r\n  --bg: #181a1b;\r\n  --text: #f3f4f6;\r\n  --header-bg: #2563eb;\r\n  --header-text: #e0e7ef;\r\n  --card-bg: #23272f;\r\n  --card-shadow: 0 2px 16px rgba(0,0,0,0.25);\r\n  --input-bg: #23272f;\r\n  --input-border: #374151;\r\n  --input-focus: #2563eb;\r\n  --primary: #2563eb;\r\n  --primary-hover: #1d4ed8;\r\n  --danger: #e11d48;\r\n  --card-radius: 18px;\r\n}\r\n:host, body, html {\r\n  background: var(--bg) !important;\r\n  color: var(--text);\r\n}\r\nheader {\r\n  background: var(--header-bg);\r\n  color: var(--header-text);\r\n}\r\n.wallet-card, .card, .transactions-container {\r\n  background: var(--card-bg);\r\n  box-shadow: var(--card-shadow);\r\n  color: var(--text);\r\n}\r\ninput[type=\"number\"], input[type=\"text\"] {\r\n  background: var(--input-bg);\r\n  border: 1.5px solid var(--input-border);\r\n  color: var(--text);\r\n}\r\ninput[type=\"number\"]:focus, input[type=\"text\"]:focus {\r\n  border-color: var(--input-focus);\r\n  box-shadow: 0 0 0 3px rgba(37,99,235,0.12);\r\n}\r\n.submit-btn {\r\n  background: var(--primary);\r\n  color: #fff;\r\n}\r\n.submit-btn:hover {\r\n  background: var(--primary-hover);\r\n}\r\n.view-transactions-btn {\r\n  border: 1.5px solid var(--primary);\r\n  color: var(--primary);\r\n}\r\n.view-transactions-btn:hover {\r\n  background: #eff6ff;\r\n}\r\n.error {\r\n  color: var(--danger);\r\n}\r\n","import { Component, Element, h, State, Listen } from '@stencil/core';\r\nimport { API_BASE_URL } from '../../config';\r\n\r\ninterface Config {\r\n  apiBaseUrl: string;\r\n  notificationDuration: number;\r\n}\r\n\r\n@Component({\r\n  tag: 'wallet-app-root',\r\n  styleUrl: 'wallet-app-root.css',\r\n  shadow: true,\r\n})\r\nexport class WalletAppRoot {\r\n  @Element() el!: HTMLElement;\r\n\r\n  @State() page: string = 'setup';\r\n  @State() walletId: string = '';\r\n  @State() theme: 'light' | 'dark' = 'light';\r\n  @State() notification: { message: string; type: 'success' | 'error' } = { message: '', type: 'success' };\r\n\r\n  private readonly config: Config = {\r\n    apiBaseUrl: API_BASE_URL,\r\n    notificationDuration: 3000,\r\n  };\r\n\r\n  private notificationTimeout?: number;\r\n  private mediaQuery?: MediaQueryList;\r\n\r\n  componentWillLoad() {\r\n    this.setupThemeDetection();\r\n    return this.loadSavedWallet();\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    if (this.notificationTimeout) {\r\n      window.clearTimeout(this.notificationTimeout);\r\n    }\r\n    if (this.mediaQuery?.removeEventListener) {\r\n      this.mediaQuery.removeEventListener('change', this.handleThemeChange);\r\n    }\r\n  }\r\n\r\n  private setupThemeDetection() {\r\n    try {\r\n      this.mediaQuery = window.matchMedia('(prefers-color-scheme: dark)');\r\n      this.theme = this.mediaQuery.matches ? 'dark' : 'light';\r\n      \r\n      if (this.mediaQuery.addEventListener) {\r\n        this.mediaQuery.addEventListener('change', this.handleThemeChange);\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to setup theme detection:', error);\r\n      this.theme = 'light';\r\n    }\r\n  }\r\n  @Listen('change', { target: 'window' })\r\n  handleThemeChange(e: MediaQueryListEvent) {\r\n    this.theme = e.matches ? 'dark' : 'light';\r\n  }\r\n\r\n  private async loadSavedWallet() {\r\n    const savedWalletId = localStorage.getItem('walletId');\r\n    if (!savedWalletId) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const res = await fetch(`${this.config.apiBaseUrl}/wallet/${savedWalletId}`);\r\n      if (!res.ok) {\r\n        const errorText = await res.text();\r\n        throw new Error(errorText || 'Failed to load wallet');\r\n      }\r\n      this.walletId = savedWalletId;\r\n      this.page = 'dashboard';\r\n    } catch (error: any) {\r\n      console.error('Failed to load wallet:', error);\r\n      this.showNotification(\r\n        error.message === 'Failed to fetch'\r\n          ? 'Unable to connect to backend.'\r\n          : 'Wallet does not exist in the system. Please create a new wallet.',\r\n        'error'\r\n      );\r\n      localStorage.removeItem('walletId');\r\n      this.walletId = '';\r\n      this.page = 'setup';\r\n    }\r\n  }\r\n  \r\n  private showNotification = (message: string, type: 'success' | 'error' = 'success') => {\r\n    if (this.notificationTimeout) {\r\n      window.clearTimeout(this.notificationTimeout);\r\n    }\r\n    \r\n    this.notification = { message, type };\r\n    this.notificationTimeout = window.setTimeout(() => {\r\n      this.notification = { message: '', type: 'success' };\r\n    }, this.config.notificationDuration);\r\n  };\r\n\r\n  private handleWalletCreated = async (event: CustomEvent<{ walletId: string }>) => {\r\n    if (event.detail.walletId) {\r\n      this.walletId = event.detail.walletId;\r\n      localStorage.setItem('walletId', event.detail.walletId);\r\n\r\n      try {\r\n        const res = await fetch(`${this.config.apiBaseUrl}/wallet/${event.detail.walletId}`);\r\n        if (!res.ok) {\r\n          throw new Error('Failed to verify wallet');\r\n        }\r\n        await res.json();\r\n        this.page = 'dashboard';\r\n      } catch (error) {\r\n        console.error('Error verifying wallet:', error);\r\n        this.showNotification('Error loading wallet details', 'error');\r\n        localStorage.removeItem('walletId');\r\n        this.walletId = '';\r\n        this.page = 'setup';\r\n      }\r\n    }\r\n  };\r\n\r\n  private handleShowTransactions = () => {\r\n    if (this.walletId) {\r\n      this.page = 'transactions';\r\n    }\r\n  };\r\n\r\n  private handleBack = () => {\r\n    this.page = 'dashboard';\r\n  };\r\n\r\n  private handleNotificationChange = (event: CustomEvent<{ message: string; type: 'success' | 'error' }>) => {\r\n    if (event.detail.message) {\r\n      this.showNotification(event.detail.message, event.detail.type);\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const commonProps = {\r\n      'api-base-url': this.config.apiBaseUrl,\r\n      onNotificationChange: this.handleNotificationChange,\r\n    };\r\n\r\n    return (\r\n      <div class={`theme-${this.theme}`}>\r\n        <header>\r\n          <h1>Wallet App</h1>\r\n        </header>\r\n        <main>\r\n          {this.page === 'setup' && (\r\n            <wallet-setup \r\n              {...commonProps}\r\n              onWalletCreated={this.handleWalletCreated}\r\n            />\r\n          )}\r\n          {this.page === 'dashboard' && this.walletId && (\r\n            <wallet-dashboard \r\n              {...commonProps}\r\n              wallet-id={this.walletId} \r\n              onShowTransactions={this.handleShowTransactions}\r\n            />\r\n          )}\r\n          {this.page === 'transactions' && this.walletId && (\r\n            <wallet-transactions \r\n              {...commonProps}\r\n              wallet-id={this.walletId} \r\n              onBack={this.handleBack}\r\n            />\r\n          )}\r\n        </main>\r\n        <notification-toast \r\n          message={this.notification.message} \r\n          type={this.notification.type} \r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n"],"names":[],"mappings":"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"}