{"file":"wallet-setup.entry.esm.js","mappings":"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","names":[],"sources":["src/components/wallet-setup/wallet-setup.css?tag=wallet-setup&encapsulation=shadow","src/components/wallet-setup/wallet-setup.tsx"],"sourcesContent":[".card {\r\n  background: #fff;\r\n  border-radius: 1.25rem;\r\n  box-shadow: 0 2px 16px 0 rgba(37,99,235,0.08);\r\n  padding: 2rem 1.5rem;\r\n  margin: 0 auto;\r\n  max-width: 400px;\r\n  width: 100%;\r\n  min-width: 360px;\r\n  box-sizing: border-box;\r\n}\r\n\r\n@media (max-width: 500px) {\r\n  .card {\r\n    padding: 1.5rem 0.5rem;\r\n    max-width: 100vw;\r\n    min-width: 0;\r\n  }\r\n}\r\n\r\nh2 {\r\n  font-size: 2rem;\r\n  font-weight: 700;\r\n  margin-bottom: 1.2rem;\r\n  margin-top: 0;\r\n  letter-spacing: 0.01em;\r\n  color: #2563eb;\r\n  text-align: center;\r\n}\r\nform {\r\n  width: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 1.1rem;\r\n  margin-bottom: 1.2rem;\r\n}\r\ninput[type=\"number\"],\r\ninput[type=\"text\"] {\r\n  padding: 0.6rem 0.8rem;\r\n  border: 1.5px solid #cbd5e1;\r\n  border-radius: 7px;\r\n  font-size: 1rem;\r\n  background: #f8fafc;\r\n  color: #22223b;\r\n  margin-bottom: 0.2rem;\r\n}\r\ninput[type=\"number\"]::-webkit-inner-spin-button,\r\ninput[type=\"number\"]::-webkit-outer-spin-button {\r\n  -webkit-appearance: none;\r\n  margin: 0;\r\n}\r\n.submit-btn {\r\n  width: 100%;\r\n  padding: 0.7rem 0;\r\n  background: #2563eb;\r\n  color: #fff;\r\n  border: none;\r\n  border-radius: 7px;\r\n  font-weight: 600;\r\n  font-size: 1.1rem;\r\n  margin-top: 0.5rem;\r\n  margin-bottom: 0.7rem;\r\n  transition: background 0.2s;\r\n}\r\n.submit-btn:disabled {\r\n  background: #cbd5e1;\r\n  color: #64748b;\r\n  cursor: not-allowed;\r\n}\r\n.submit-btn:hover:not(:disabled) {\r\n  background: #1d4ed8;\r\n}\r\n.error {\r\n  color: #e11d48;\r\n  background: #fef2f2;\r\n  border-radius: 8px;\r\n  padding: 0.7rem 1rem;\r\n  margin-top: 1rem;\r\n  font-size: 1.05rem;\r\n  border: 1px solid #fecaca;\r\n}\r\n","import { Component, Event, EventEmitter, h, State } from '@stencil/core';\r\nimport { API_BASE_URL } from '../../config';\r\n\r\n@Component({\r\n  tag: 'wallet-setup',\r\n  styleUrl: 'wallet-setup.css',\r\n  shadow: true,\r\n})\r\nexport class WalletSetup {\r\n  @Event() walletCreated: EventEmitter<{ walletId: string }>;\r\n  @Event() notificationChange: EventEmitter<{ message: string; type: 'success' | 'error' }>;\r\n  @State() name: string = '';\r\n  @State() balance: string = '';\r\n  @State() loading: boolean = false;\r\n  @State() error: string = '';\r\n\r\n  async handleSubmit(e: Event) {\r\n    e.preventDefault();\r\n    this.error = '';\r\n    if (!this.name || !this.balance) {\r\n      this.notificationChange.emit({ message: 'Name and balance are required', type: 'error' });\r\n      return;\r\n    }\r\n    // Require balance > 0\r\n    if (Number(this.balance) < 0) {\r\n      this.notificationChange.emit({ message: 'Initial balance must be greater than 0', type: 'error' });\r\n      return;\r\n    }\r\n\r\n    this.loading = true;\r\n    try {\r\n      const res = await fetch(`${API_BASE_URL}/setup`, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ name: this.name, balance: Number(this.balance) }),\r\n      });\r\n\r\n      if (!res.ok) {\r\n        const errData = await res.json().catch(() => ({}));\r\n        throw new Error(errData.error || 'Failed to create wallet');\r\n      }\r\n\r\n      const data = await res.json();\r\n      \r\n      // First notify about successful creation\r\n      this.notificationChange.emit({ \r\n        message: 'Wallet created successfully!', \r\n        type: 'success' \r\n      });\r\n\r\n      // Clear form\r\n      this.name = '';\r\n      this.balance = '';\r\n      \r\n      // Then emit wallet created event to trigger navigation\r\n      this.walletCreated.emit({ walletId: data.id });\r\n\r\n    } catch (err) {\r\n      const errorMessage = err instanceof Error ? err.message : 'Failed to create wallet';\r\n      this.notificationChange.emit({ \r\n        message: errorMessage,\r\n        type: 'error' \r\n      });\r\n    } finally {\r\n      this.loading = false;\r\n    }\r\n  }\r\n\r\n  private handleBalanceInput = (e: Event) => {\r\n    const input = e.target as HTMLInputElement;\r\n    const value = input.value;\r\n    const parts = value.split('.');\r\n    if (parts[1] && parts[1].length > 4) {\r\n      input.value = `${parts[0]}.${parts[1].slice(0, 4)}`;\r\n    }\r\n    this.balance = input.value;\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div class=\"card\">\r\n        <h2>Setup Wallet</h2>\r\n        <form onSubmit={e => this.handleSubmit(e)}>\r\n          <input type=\"text\" value={this.name} onInput={e => this.name = (e.target as HTMLInputElement).value} placeholder=\"Name\" required />\r\n          <input\r\n            type=\"number\"\r\n            step=\"0.0001\"\r\n            min=\"0.0001\"\r\n            pattern=\"^\\\\d*\\\\.?\\\\d{0,4}$\"\r\n            onInput={this.handleBalanceInput}\r\n            value={this.balance}\r\n            placeholder=\"Initial Balance\"\r\n            required\r\n          />\r\n          <button class=\"submit-btn\" type=\"submit\" disabled={this.loading}>{this.loading ? 'Creating...' : 'Create Wallet'}</button>\r\n        </form>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n"],"version":3}